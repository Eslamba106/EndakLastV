# الحقول المخصصة للأقسام

## الوصف
تم إضافة نظام الحقول المخصصة للأقسام والأقسام الفرعية. هذا النظام يسمح بإنشاء حقول ديناميكية حسب احتياجات كل قسم.

## أنواع الحقول المدعومة

### 1. النص (text)
- حقل نص عادي
- مناسب للبيانات النصية القصيرة

### 2. الرقم (number)
- حقل رقمي
- مناسب للكميات والأسعار

### 3. القائمة المنسدلة (select)
- قائمة منسدلة بخيارات محددة مسبقاً
- يمكن إضافة خيارات متعددة

### 4. مربع الاختيار (checkbox)
- مربع اختيار (صح/خطأ)
- مناسب للخيارات البسيطة

### 5. مربع النص (textarea)
- حقل نص طويل
- مناسب للوصف والملاحظات

### 6. الصورة (image)
- حقل لرفع الصور
- يدعم: jpeg, png, jpg, gif
- الحد الأقصى: 2MB

### 7. التاريخ (date)
- حقل تاريخ
- يظهر تقويم للاختيار

### 8. الوقت (time)
- حقل وقت
- يظهر ساعة للاختيار

## كيفية الاستخدام

### إنشاء حقل مخصص:

1. **انتقل إلى صفحة الأقسام**
2. **اختر القسم المطلوب**
3. **اضغط على "إدارة الحقول"**
4. **اضغط على "إضافة حقل جديد"**
5. **املأ البيانات المطلوبة:**
   - **اسم الحقل بالعربي** (مطلوب)
   - **اسم الحقل بالإنجليزي** (مطلوب)
   - **نوع الحقل** (مطلوب)
   - **القسم الفرعي** (اختياري)
   - **مجموعة الإدخال** (اختياري)
   - **قابل للتكرار** (اختياري)
   - **مطلوب** (اختياري)
   - **الوصف** (اختياري)

### إعدادات متقدمة:

#### مجموعة الإدخال:
- ضع نفس القيمة للحقول التي تريد دمجها في صف واحد
- مثال: `group1` لجميع الحقول المرتبطة

#### قابل للتكرار:
- يسمح للمستخدم بإضافة أكثر من مجموعة من نفس الحقول
- مفيد للحقول المتعددة مثل "أرقام الهواتف"

#### مطلوب:
- يجعل الحقل إلزامي للمستخدم
- يظهر علامة * بجانب الحقل

## أسماء الحقول المقترحة:

| الاسم بالإنجليزي | الاسم بالعربي |
|------------------|---------------|
| neighborhood | الحي |
| from_city | من المدينة |
| from_neighborhood | من الحي |
| to_city | إلى المدينة |
| to_neighborhood | إلى الحي |
| model | الموديل |
| year | السنة |
| brand | الماركة |
| part_number | رقم القطعة |
| equip_type | نوع المعدة |
| car_type | نوع السيارة |
| location | الموقع |
| gender | الجنس |
| time | الوقت |
| date | التاريخ |
| day | اليوم |
| quantity | الكمية |

## معالجة الصور:

### عند إنشاء حقل من نوع "صورة":
1. **اختر نوع الحقل: "صورة"**
2. **اضغط على "اختيار ملف"**
3. **اختر صورة من جهازك**
4. **الصورة ستُحفظ في مجلد `field_images`**

### أنواع الصور المدعومة:
- JPEG
- PNG
- JPG
- GIF

### الحد الأقصى:
- 2 ميجابايت لكل صورة

## استكشاف الأخطاء:

### إذا ظهرت رسالة خطأ "The custom fields.image field must be a file":
1. **تأكد من اختيار نوع الحقل "صورة"**
2. **تأكد من رفع ملف صورة صحيح**
3. **تأكد من أن حجم الصورة أقل من 2MB**
4. **تأكد من أن نوع الملف مدعوم**

### إذا لم تظهر الصورة:
1. **تأكد من وجود مجلد `storage/app/public/field_images`**
2. **قم بتشغيل `php artisan storage:link`**
3. **تأكد من صلاحيات المجلد**

## الملفات المهمة:

- `app/Http/Controllers/Admin/DepartmentFieldController.php` - تحكم الحقول
- `resources/views/admin/department_fields/` - واجهات الحقول
- `app/Models/DepartmentField.php` - نموذج الحقل
- `database/migrations/` - ترحيل قاعدة البيانات

## المسارات:

- `GET /admin/departments/{id}/fields` - عرض الحقول
- `GET /admin/departments/{id}/fields/create` - إنشاء حقل جديد
- `POST /admin/departments/{id}/fields` - حفظ الحقل
- `GET /admin/departments/fields/{id}/edit` - تعديل الحقل
- `PUT /admin/departments/fields/{id}` - تحديث الحقل
- `DELETE /admin/departments/fields/{id}` - حذف الحقل 
